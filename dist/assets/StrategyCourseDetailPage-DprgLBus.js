import{j as s}from"./vendor-query-sc-3RV5c.js";import{e as R,u as U,r as c,L as p}from"./vendor-react-BsyC4uYt.js";import{u as A,c as F,p as z,m as H,d as K,b as x,s as N,S as V}from"./main-Dg9phZgI.js";import{b as W,u as q,a as B,g as G}from"./useCourses-DalhN84i.js";import{P as J}from"./ProgressIndicator-C2pbtT2V.js";import{C as Q}from"./ContentCard-1TjFyuls.js";import{S as X}from"./SEO-BQWZoWKI.js";import{F as Y,A as Z}from"./FeaturedImage-D4irbYzn.js";import{c as ee,C as w}from"./vendor-ui-BIzQpSM7.js";import"./vendor-helmet-BvUtKEoN.js";import"./auth-BiqxfGvi.js";function pe(){var b,j,_;const{slug:o,lang:S}=R(),L=U(),{t:a,tWithReplace:g}=A(),i=F(),n=S||z(L.pathname).lang||void 0,h=n||i||null;c.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[o]);const{data:e,isLoading:k,isError:C}=W(o,n),{data:r=[],isLoading:M}=q(n,i),{data:f=[],isLoading:$}=B({per_page:100,orderby:"date",order:"desc",lang:n}),y=c.useMemo(()=>G(f,r,o,h,9),[f,r,o,h]),{currentStep:D,nextStep:m,previousStep:u}=c.useMemo(()=>{if(!o||r.length===0)return{currentStep:null,nextStep:null,previousStep:null};const t=r.findIndex(O=>O.slug===o);return t===-1?{currentStep:null,nextStep:null,previousStep:null}:{currentStep:r[t],nextStep:t<r.length-1?r[t+1]:null,previousStep:t>0?r[t-1]:null}},[o,r]);c.useEffect(()=>{e&&e.steps!==null&&e.steps!==void 0&&e.steps>=1&&e.steps<=20&&H(e.slug)},[e]);const E=c.useMemo(()=>{var t;return(t=e==null?void 0:e.content)!=null&&t.rendered?K(e.content.rendered):""},[(b=e==null?void 0:e.content)==null?void 0:b.rendered]);if(k||M||$)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"}),s.jsx("p",{className:"mt-4 text-gray-600",children:a("ui_loading")})]})});if(C||!e)return s.jsxs("div",{className:"container-custom py-16 text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:a("error_course_not_found")}),s.jsx("p",{className:"text-gray-600 mb-8",children:a("error_course_not_found_desc")}),s.jsx(p,{to:x("/strategy-courses",n||null,i),className:"text-primary-500 hover:text-primary-600 font-medium",children:a("nav_back_to_strategy_courses")})]});const l=e.steps&&e.steps>=1&&e.steps<=20?`${e.steps}. ${e.title.rendered}`:e.title.rendered,v=(j=e.excerpt)!=null&&j.rendered?N(e.excerpt.rendered):N(e.content.rendered).substring(0,160),P=`M2DMM strategy course, ${l}, MVP course step ${e.steps||""}, media to movements, disciple making strategy, ${l.toLowerCase()}`,d=typeof window<"u"?window.location.origin:"https://ai.kingdom.training",T=`${d}/strategy-courses/${e.slug}`,I=`${d}/wp-content/themes/kingdom-training-theme/dist/kt-logo-header.webp`;return s.jsxs("article",{children:[s.jsx(X,{title:l,description:v,keywords:P,image:e.featured_image_url,url:`/strategy-courses/${e.slug}`,type:"article",author:(_=e.author_info)==null?void 0:_.name,publishedTime:e.date,modifiedTime:e.modified}),s.jsx(V,{course:{name:l,description:v,provider:{name:"Kingdom.Training",url:d},courseCode:e.steps?`MVP-STEP-${e.steps}`:void 0,educationalLevel:"Professional Development",teaches:["Media to Disciple Making Movements","Digital Evangelism","Online Ministry Strategy","Disciple Making Movements"],image:e.featured_image_url||I},breadcrumbs:{items:[{name:a("breadcrumb_home"),url:d},{name:a("nav_strategy_courses"),url:`${d}/strategy-courses`},{name:l,url:T}]}}),e.featured_image_url&&s.jsx(Y,{src:e.featured_image_url,alt:e.title.rendered,imageSizes:e.featured_image_sizes}),s.jsx("div",{className:"container-custom py-12 bg-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto relative",children:[s.jsx(Z,{postId:e.id}),s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:a("course_strategy_course")})}),s.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:e.steps&&e.steps>=1&&e.steps<=20?`${e.steps}. ${e.title.rendered}`:e.title.rendered})]}),r.length>0&&r.some(t=>t.slug===o)&&s.jsx(J,{stepSlugs:r.map(t=>t.slug),totalSteps:r.length,className:"mb-8"}),s.jsx("div",{className:"prose prose-lg max-w-none prose-headings:text-gray-900 prose-headings:font-bold prose-h1:text-4xl prose-h2:text-3xl prose-h3:text-2xl prose-p:my-6 prose-strong:text-gray-900 prose-strong:font-bold prose-a:text-primary-500 prose-a:no-underline hover:prose-a:underline prose-ul:my-6 prose-ol:my-6 prose-li:my-2",dangerouslySetInnerHTML:{__html:E}}),D&&s.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u?s.jsxs(p,{to:x(`/strategy-courses/${u.slug}`,n||null,i),className:"inline-flex items-center px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:border-primary-500 hover:text-primary-600 transition-all duration-200",children:[s.jsx(ee,{className:"w-5 h-5 mr-2"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:a("nav_previous")}),s.jsx("div",{className:"text-sm font-semibold",children:g("nav_step",{number:u.steps||r.indexOf(u)+1})})]})]}):s.jsx("div",{}),m?s.jsxs(p,{to:x(`/strategy-courses/${m.slug}`,n||null,i),className:"inline-flex items-center px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-lg transition-colors duration-200",children:[s.jsxs("div",{className:"text-right mr-2",children:[s.jsx("div",{className:"text-xs text-white/80 uppercase tracking-wide",children:a("nav_next")}),s.jsx("div",{className:"text-sm font-semibold",children:g("nav_step",{number:m.steps||r.indexOf(m)+1})})]}),s.jsx(w,{className:"w-5 h-5"})]}):s.jsxs(p,{to:x("/strategy-courses",n||null,i),className:"inline-flex items-center px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-lg transition-colors duration-200",children:[s.jsx("span",{children:a("nav_back_to_course_overview")}),s.jsx(w,{className:"w-5 h-5 ml-2"})]})]})})]})}),y.length>0&&s.jsx("section",{className:"py-16 bg-background-50 border-t border-gray-200",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:a("content_additional_resources")}),s.jsx("p",{className:"text-lg text-gray-700 leading-relaxed max-w-3xl mx-auto",children:a("content_supplementary_materials")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map(t=>s.jsx(Q,{post:t,type:"strategy-courses",lang:n||null,defaultLang:i},t.id))})]})})})]})}export{pe as default};
