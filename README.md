# Kingdom.Training - WordPress Theme

A modern headless WordPress theme with a React frontend built with Vite, TypeScript, and Tailwind CSS. Designed for Media to Disciple Making Movements training.

## Overview

This theme uses WordPress as a headless CMS, serving content via the REST API to a React frontend. The frontend is built with Vite and served directly from the WordPress theme directory, creating a seamless integration.

## Project Structure

```
kingdom-training-theme/
├── style.css              # Theme information
├── functions.php          # WordPress functionality & REST API customization
├── index.php             # Fallback template (for WordPress requirement)
├── header.php            # HTML head
├── footer.php            # HTML footer
├── dist/                 # Built frontend files (generated by build:theme)
├── README.md             # This file
└── frontend/             # React/Vite application
    ├── src/
    │   ├── pages/        # React Router pages
    │   ├── components/   # React components
    │   ├── lib/          # Utilities and API functions
    │   └── styles/       # Global styles
    ├── public/           # Static assets
    ├── package.json      # Node dependencies
    └── vite.config.ts    # Vite configuration
```

## WordPress Setup

### Installation

1. Upload this theme to your WordPress `wp-content/themes/` directory
2. Activate the theme in WordPress admin
3. Go to **Settings → Permalinks** and set to "Post name"
4. Go to **Appearance → Menus** and create a Primary menu with links to:
   - Strategy Courses
   - Articles
   - Tools
   - About

### Custom Post Types

The theme registers three custom post types:

- **Strategy Courses** (`strategy_course`) - `/wp-json/wp/v2/strategy-courses`
- **Articles** (`article`) - `/wp-json/wp/v2/articles`
- **Tools** (`tool`) - `/wp-json/wp/v2/tools`

All custom post types support:
- Title, content, excerpt
- Featured images
- Custom fields
- Categories and tags
- REST API access

### Custom API Endpoints

- **Site Info**: `/wp-json/gaal/v1/site-info`
- **Menus**: `/wp-json/gaal/v1/menus/{location}` (e.g., `/wp-json/gaal/v1/menus/primary`)
- **Authentication**: 
  - `POST /wp-json/gaal/v1/auth/login` - User login
  - `POST /wp-json/gaal/v1/auth/logout` - User logout
  - `GET /wp-json/gaal/v1/auth/me` - Get current user

### REST API Enhancements

The theme adds the following fields to REST API responses:
- `featured_image_url` - Direct URL to featured image
- `author_info` - Author name, avatar, and bio

## Frontend Setup

### Prerequisites

- Node.js 18+ and npm
- WordPress installation with this theme activated

### Installation

```bash
cd frontend
npm install
```

### Development

For local development with live reload:

```bash
npm run watch
```

This will:
- Watch for file changes
- Automatically rebuild
- Copy files to the theme's `dist/` directory
- Your MAMP WordPress site will serve the updated files

For standalone development server:

```bash
npm run dev
```

Visit `http://localhost:3000` to see the frontend.

### Production Build

Build and copy to theme directory:

```bash
npm run build:theme
```

This creates the `dist/` directory in the theme root with all static files that WordPress serves.

## Content Strategy

This theme is designed for Kingdom.Training, which focuses on:

- Training disciple makers to use media strategically
- Media to Disciple Making Movements (M2DMM) strategies
- Connecting online engagement with face-to-face discipleship
- Equipping practitioners with practical tools and resources

### Content Types

1. **Strategy Courses** - Comprehensive training courses on M2DMM strategy development
2. **Articles** - Practical guidance, best practices, and insights
3. **Tools** - Essential tools and resources for M2DMM work

## Design System

The theme follows the Kingdom Training brand aesthetic:

### Colors
- Primary: Deep Blue (#4169e1)
- Secondary: Gold (#FFD700)
- Text: Gunmetal (#2F3E46)

### Typography
- Font Family: Inter (sans-serif)

## Development Guidelines

### Adding Custom Fields

To add custom fields to the REST API, edit `functions.php`:

```php
register_rest_field(
    array('strategy_course', 'article', 'tool'),
    'your_field_name',
    array(
        'get_callback' => function($object) {
            return get_post_meta($object['id'], 'your_field_name', true);
        },
        'schema' => array(
            'description' => 'Your field description',
            'type' => 'string',
        ),
    )
);
```

### Creating New Components

Components are located in `frontend/src/components/`. Use TypeScript and Tailwind CSS for consistency.

### API Integration

Use the utility functions in `frontend/src/lib/wordpress.ts` for all WordPress API calls.

### Authentication

The theme includes a login system integrated with WordPress authentication. Users can log in at `/login` and access the WordPress admin dashboard.

## Deployment

### Building for Production

1. Build the frontend:
   ```bash
   cd frontend
   npm run build:theme
   ```

2. Upload the entire theme directory to your WordPress installation:
   - `/wp-content/themes/kingdom-training-theme/`

3. Make sure the `/dist` directory is included in your deployment

4. Activate the theme in WordPress admin

The frontend will be automatically served by WordPress through the theme's `functions.php`.

## Documentation

- [Frontend README](frontend/README.md) - Detailed frontend documentation
- [Watch Setup](frontend/WATCH_SETUP.md) - Development workflow guide

## Support

For questions or issues:
- Documentation: See inline comments in code files
- WordPress REST API: https://developer.wordpress.org/rest-api/
- Vite Documentation: https://vitejs.dev/
- React Router: https://reactrouter.com/

## License

GNU General Public License v2 or later

## Mission

*"Of the sons of Issachar, men who understood the times, with knowledge of what Israel should do."* - 1 Chronicles 12:32

We exist to train disciple makers to use media strategically for Disciple Making Movements, equipping practitioners with practical strategies that bridge online engagement with face-to-face discipleship.
